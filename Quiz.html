<!DOCTYPE html>
<html lang="en">
<head>
    <!-- 1,4 ,6,9,10-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&display=swap');

        *{
            margin: 0;
            font-family: 'Titillium Web';
        }
        body{
            background-image: url(back1.jpg);
            background-size: cover;
            backdrop-filter:blur(2px);
            overflow: hidden;
        }
        .BlurLayer{
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .qCard{
            background-color: rgba(0, 0, 0, 0.44);
            width: 60vw;
            height: 50vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(1px);
            border: 4px solid rgb(251,29,125);
            border-radius: 7px;
            border-bottom-left-radius: 0px;
            border-bottom-right-radius: 0px;
        }
        .Q{
            width: 100%;
            height: 35%;
            background-color: rgba(0, 0, 0, 0);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .inQ{
            width: 90%;
            height: 75%;
            background-color: rgb(251, 29, 125);
            border-radius: 100px;
        }
        .options{
            width: 100%;
            height: 65%;
            background-color: rgba(137, 43, 226, 0);
            display: grid;
            grid-template-columns: auto auto;
        }
        .option{
            width: auto;
            margin: 35px 90px;
            border-radius: 100px;
            height: auto;
            background-color: rgb(255, 255, 255);
        }
        .otherBtns{
            width: 60vw;
            height: 10%;
            background-color: rgb(251,29,125);
            border-radius: 7px;
            border-top-left-radius: 0px;
            border-top-right-radius: 0px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 60px;
        }
        .bookmark,.skip{
            width: 25%;
            height: 65%;
            background-color: rgba(255, 255, 255, 0.811);
            border: 3px solid black;
            border-radius: 109px;
            display: flex;
            justify-content:  center;
            align-items: center;
            font-size: 30px;

        }
        .timer{
            height: 95px;
            width: 95px;
            border-radius: 100%;
            border: 3px solid black;
            background-color: rgba(255, 255, 255, 0.811);
            display: flex;
            justify-content:  center;
            align-items: center;
            font-size: 30px;
        }
        .fa{
            font-size: 50px;
            margin-right: 10px;
        }
        .realQ{
            text-align: center;
            font-size: 23px;
        }
    </style>
</head>
<body>
    <div class="BlurLayer">
        <div class="qCard">
            <div class="Q">
                <div class="inQ">
                    <div class="realQ"></div>
                </div>
            </div>
            <div class="options">
                <div class="option"></div>
                <div class="option"></div>
                <div class="option"></div>
                <div class="option"></div>
            </div>
        </div>
        <div class="otherBtns">
            <div class="bookmark">
                <i class="fa fa-bookmark" aria-hidden="true"></i>
                BOOKMARK
            </div>
            <div class="timer">
                30
            </div>
            <div class="skip" onclick="skipQuestion()">
                <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                SKIP
            </div>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const questionElement = document.querySelector('.inQ');
            const optionsContainer = document.querySelector('.options');
            const timerElement = document.querySelector('.timer');

            async function fetchQuizData() {
                try {
                    let response = await fetch("https://opentdb.com/api.php?amount=5&category=9&difficulty=easy&type=multiple");
                    let data = await response.json();
                    return data.results;
                } catch (error) {
                    console.error("Error fetching quiz data:", error);
                    return []; // Return an empty array if there's an error
                }
            }

            let quizData = [];
            let currentQuestionIndex = 0;
            let countdown;

            async function initializeQuiz() {
                quizData = await fetchQuizData();
                displayQuestion();
                startTimer();
            }

            function displayQuestion() {
                const currentQuestion = quizData[currentQuestionIndex];
                const questionNumber = currentQuestionIndex + 1; // Question numbers start from 1
                questionElement.innerHTML = `<div class="realQ">${questionNumber}. ${currentQuestion.question}</div>`;

                optionsContainer.innerHTML = '';
                currentQuestion.incorrect_answers.forEach((option) => {
                    const optionElement = document.createElement('div');
                    optionElement.classList.add('option');
                    optionElement.textContent = option;
                    optionElement.addEventListener('click', selectOption);
                    optionsContainer.appendChild(optionElement);
                });

                const correctOptionElement = document.createElement('div');
                correctOptionElement.classList.add('option');
                correctOptionElement.textContent = currentQuestion.correct_answer;
                correctOptionElement.addEventListener('click', selectOption);
                optionsContainer.appendChild(correctOptionElement);
            }

            function selectOption(event) {
                clearInterval(countdown);
                const selectedOption = event.target.textContent;
                const correctAnswer = quizData[currentQuestionIndex].correct_answer;

                if (selectedOption === correctAnswer) {
                    event.target.style.backgroundColor = '#4CAF50'; // Green color for correct answer
                } else {
                    event.target.style.backgroundColor = '#F44336'; // Red color for incorrect answer
                    // Highlight the correct answer
                    optionsContainer.querySelector(`.option:nth-child(${quizData[currentQuestionIndex].incorrect_answers.length + 1})`).style.backgroundColor = '#4CAF50';
                }

                // Move to the next question after a short delay
                setTimeout(nextQuestion, 1000);
            }

            function nextQuestion() {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizData.length) {
                    displayQuestion();
                    startTimer();
                } else {
                    questionElement.textContent = 'Quiz completed!';
                    optionsContainer.innerHTML = ''; // Clear options
                    timerElement.textContent = ''; // Clear timer
                }
            }

            function startTimer() {
                let secondsLeft = 30;
                timerElement.textContent = secondsLeft;

                countdown = setInterval(() => {
                    secondsLeft--;
                    timerElement.textContent = secondsLeft;
                    if (secondsLeft === 0) {
                        clearInterval(countdown);
                        //checkAnswer(null, quizData[currentQuestionIndex].correct_answer); // Remove this line
                        nextQuestion(); // Call nextQuestion() directly
                    }
                }, 1000);
            }

            function skipQuestion() {
                clearInterval(countdown); // Stop the timer
                nextQuestion(); // Skip to the next question
            }

            initializeQuiz();
        });
    </script>
</body>
</html>
